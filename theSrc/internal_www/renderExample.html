<!doctype html>
<html>
<head>
  <link href='https://fonts.googleapis.com/css?family=Arvo:400,700italic,700,400italic' rel='stylesheet' type='text/css'>
  <link href='/styles/internal_www.css' rel='stylesheet' type='text/css'>
  <script src="../../internal_www/external/lodash.min.js"></script>
  <script src="../../internal_www/external/jquery.min.js"></script>
</head>
<body>
<script src="/js/renderContentPage.js"></script>

<div id="render-example-container" style="display:inline-block"></div>

<script>
  function getUrlVars() {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
  }

  $(document).ready(function () {

    // NB run this next tick to ensure:
    // A) renderContentPage.js does not pick up the class=example before we have added the data- properties to render-example-container
    // B) renderContentPage.js has added addExampleTo the window
    setTimeout(() => {
      const urlVars = getUrlVars();

      const scatterPlotDomElement = $('#render-example-container')
        .addClass('example');

      if (urlVars.width) { scatterPlotDomElement.attr('data-width', urlVars.width); }
      if (urlVars.height) { scatterPlotDomElement.attr('data-height', urlVars.height); }
      if (urlVars.config) { scatterPlotDomElement.attr('data-config', urlVars.config); }
      if (urlVars.state) { scatterPlotDomElement.attr('data-state', urlVars.state); }
      if (urlVars.rerenderControls) { scatterPlotDomElement.attr('data-rerender', true); }

      // NB addExampleTo is a function added to window by renderContentPage.js
      $('.example').each(addExampleTo);
    }, 0);
  });
</script>
</body>
</html>
